<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Repositorio de Experiencias Educativas</title>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
<header>
    <h1>ğŸ“š Repositorio de Experiencias Educativas Accesibles</h1>
</header>

<main>
<section class="intro">
    <p>Descarga, comparte y aporta experiencias educativas accesibles.  
    Â¡Tu contribuciÃ³n ayuda a la inclusiÃ³n! ğŸ’™</p>
</section>

<section id="recursos">
    <h2>ğŸ“Œ Materiales para Descargar</h2>

    <div class="card">
        <h3>ğŸ“„ GuÃ­a de Accesibilidad</h3>
        <p>Documento PDF con estrategias educativas para apoyar a estudiantes ciegos o con baja visiÃ³n en el acceso a informaciÃ³n escrita.</p>
        
        <button onclick="registrarDescarga('guia_accesibilidad.pdf')">
            Descargar
        </button>

        <p class="contador">
            Descargas: <span id="count-guia">0</span> ğŸ“¥
        </p>
    </div>

    <div class="card">
        <h3>ğŸ“ Formato de EvaluaciÃ³n Accesible</h3>
        <p>Rubrica editable para docentes con criterios de accesibilidad educativa.</p>
        
        <button onclick="registrarDescarga('rubrica_accesible.pdf')">
            Descargar
        </button>

        <p class="contador">
            Descargas: <span id="count-rubrica">0</span> ğŸ“¥
        </p>
    </div>

</section>

<section id="comentarios">
    <h2>ğŸ’¬ Comentarios y Aportes</h2>
    <p>Deja tu comentario y tu experiencia. Se mostrarÃ¡ aquÃ­ como un blog. âœ¨</p>

    <!-- â­ SecciÃ³n donde se verÃ¡n los comentarios tipo blog -->
    <div id="lista-comentarios"></div>

    <!-- â­ Formulario integrado (Google Forms) -->
    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSdXXXXXX/viewform?embedded=true"
        width="100%" height="600" frameborder="0">
        Cargandoâ€¦
    </iframe>
</section>
</main>

<footer>
    <p>ğŸŒ Proyecto de investigaciÃ³n educativa â€¢ InclusiÃ³n y accesibilidad</p>
</footer>

<!-- ===========================
     ğŸš€ FIREBASE + CONTADORES
     =========================== -->
<script type="module">
    /* ğŸ›‘ REEMPLAZA ESTAS LÃNEAS CON TU CONFIGURACIÃ“N REAL ğŸ›‘ */
    const firebaseConfig = {
        apiKey: "AIzaSyDCCeBiLlaI823x9YfSnAAabMIu74buZQY",
        authDomain: "proyecto-experiencias-c71d2.firebaseapp.com",
        projectId: "proyecto-experiencias-c71d2",
        storageBucket: "proyecto-experiencias-c71d2.firebasestorage.app",
        messagingSenderId: "736732464594",
        appId: "1:736732464594:web:00356614b151064c6db40b"
    };

    /* ğŸš€ Inicializar Firebase */
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getFirestore, doc, getDoc, setDoc, updateDoc, increment }
        from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    /* ğŸ“Œ CONTADOR DE DESCARGAS */
    async function registrarDescarga(nombreArchivo) {
        const ref = doc(db, "descargas", nombreArchivo);

        // Si no existe, lo crea con 1
        await setDoc(ref, { total: increment(1) }, { merge: true });

        // Descargar el archivo
        window.location.href = nombreArchivo;

        actualizarContadores();
    }

    window.registrarDescarga = registrarDescarga;

    /* ğŸ”„ Mostrar contadores sin que salgan 0 eternos */
    async function actualizarContadores() {
        await actualizar("guia_accesibilidad.pdf", "count-guia");
        await actualizar("rubrica_accesible.pdf", "count-rubrica");
    }

    async function actualizar(nombre, id) {
        const ref = doc(db, "descargas", nombre);
        const snap = await getDoc(ref);
        document.getElementById(id).textContent = snap.exists() ? snap.data().total : 0;
    }

    actualizarContadores();
</script>

</body>
</html>



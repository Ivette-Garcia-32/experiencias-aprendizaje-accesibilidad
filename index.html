<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Experiencias de Aprendizaje Accesibles</title>

<link rel="stylesheet" href="estilos">

<style>
/* --- ESTILOS ORIGINALES Y CLASES PARA ESTRUCTURA --- */
body{font-family:Arial,Helvetica,sans-serif;margin:0;background:#f5f5f5;color:#333}
header{background:#1a73e8;color:#fff;padding:20px;text-align:center}
.contenedor{max-width:900px;margin:auto;padding:20px}
.exp-card{background:#fff;padding:20px;margin-bottom:25px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.1)}
.exp-card h2{margin-top:0}
a.boton-descarga{background:#1a73e8;color:#fff;padding:10px 15px;border-radius:6px;text-decoration:none;display:inline-block;margin:5px 0}
a.boton-descarga:hover{background:#0b57d0}
audio{margin-top:10px;width:100%}

/* Archivo + contador en una fila */
.archivo{display:flex;align-items:center;justify-content:space-between;margin:8px 0}
.contador{font-size:13px;color:#444;display:flex;align-items:center;gap:6px;min-width:70px;justify-content:flex-end}
</style>
</head>
<body>

<header>
 <h1>Experiencias de Aprendizaje Accesibles</h1>
 <p>Estrategias para apoyar a estudiantes ciegos en el acceso a la informaci칩n</p>
</header>

<div class="contenedor">

  <div class="exp-card">
  <h2>1. Escribe con tu voz: experimenta la accesibilidad con TalkBack</h2>

  <h3>游꿚 Audio de la experiencia</h3>
  <audio controls><source src="exp1-audio.mp3" type="audio/mpeg"></audio>

  <h3>游늯 Descargas</h3>

  <div class="archivo">
      <a class="boton-descarga" href="#" onclick="trackDownload('exp1-guia.pdf', event)">Descargar Gu칤a Escrita</a>
   <div class="contador">游닌 <span id="count-exp1-guia">0</span></div>
  </div>

  <div class="archivo">
   <a class="boton-descarga" href="#" onclick="trackDownload('exp1-observacion-docente.pdf', event)">Descargar Plantilla de Observaci칩n Docente</a>
   <div class="contador">游닌 <span id="count-exp1-observacion-docente">0</span></div>
  </div>

  <div class="archivo">
   <a class="boton-descarga" href="#" onclick="trackDownload('exp1-reflexion-estudiante.pdf', event)">Descargar Plantilla de Reflexi칩n Estudiantil</a>
   <div class="contador">游닌 <span id="count-exp1-reflexion-estudiante">0</span></div>
  </div>
 </div>

  <div class="exp-card">
  <h2>2. Descubre con tus o칤dos: explorando el mundo con Google Lens</h2>

  <h3>游꿚 Audio de la experiencia</h3>
  <audio controls><source src="exp2-audio.mp3" type="audio/mpeg"></audio>

  <h3>游늯 Descargas</h3>

  <div class="archivo">
   <a class="boton-descarga" href="#" onclick="trackDownload('exp2-guia.pdf', event)">Descargar Gu칤a Escrita</a>
   <div class="contador">游닌 <span id="count-exp2-guia">0</span></div>
  </div>

  <div class="archivo">
   <a class="boton-descarga" href="#" onclick="trackDownload('exp2-observacion-docente.pdf', event)">Plantilla de Observaci칩n Docente</a>
   <div class="contador">游닌 <span id="count-exp2-observacion-docente">0</span></div>
  </div>

  <div class="archivo">
   <a class="boton-descarga" href="#" onclick="trackDownload('exp2-reflexion-estudiante.pdf', event)">Plantilla de Reflexi칩n Estudiantil</a>
   <div class="contador">游닌 <span id="count-exp2-reflexion-estudiante">0</span></div>
  </div>
 </div>

  <div class="exp-card">
  <h2>3. Escucha para aprender: acceso a la informaci칩n escrita con Lookout</h2>

  <h3>游꿚 Audio de la experiencia</h3>
  <audio controls><source src="exp3-audio.mp3" type="audio/mpeg"></audio>

  <h3>游늯 Descargas</h3>

  <div class="archivo">
   <a class="boton-descarga" href="#" onclick="trackDownload('exp3-guia.pdf', event)">Descargar Gu칤a Escrita</a>
   <div class="contador">游닌 <span id="count-exp3-guia">0</span></div>
  </div>

  <div class="archivo">
   <a class="boton-descarga" href="#" onclick="trackDownload('exp3-observacion-docente.pdf', event)">Plantilla de Observaci칩n Docente</a>
   <div class="contador">游닌 <span id="count-exp3-observacion-docente">0</span></div>
  </div>

  <div class="archivo">
   <a class="boton-descarga" href="#" onclick="trackDownload('exp3-reflexion-estudiante.pdf', event)">Plantilla de Reflexi칩n Estudiantil</a>
   <div class="contador">游닌 <span id="count-exp3-reflexion-estudiante">0</span></div>
  </div>
 </div>

  <div class="exp-card" id="comentarios-giscus">
  <h2>游눫 Comparte tu opini칩n sobre estas experiencias</h2>
  <p>Tu retroalimentaci칩n nos ayuda a mejorar estas gu칤as y experiencias. Los comentarios se guardan usando las Discusiones de GitHub.</p>
  
    <div class="giscus"></div>
 </div>

</div>

<script>
// ---------- 1. CONFIGURACI칍N DE RASTREO DE DESCARGAS (Google Forms) ----------
const FORM_SUBMIT_URL = 'https://docs.google.com/forms/d/e/1FAIpQLScHSi5whEBBhPT5ozshtAcYZHtRiiV6uMyn6WS3DViU3HjZ4Q/formResponse';
// 游뚿 춰IMPORTANTE! REEMPLAZA "entry.1234567890" por el ID REAL de tu campo en Google Forms
// Este ID es donde se guardar치 el nombre del archivo (exp1-guia.pdf)
const FILE_NAME_ENTRY_ID = 'entry.1051512415';

/**
 * Funci칩n que registra el evento en Google Forms y luego inicia la descarga.
 * @param {string} fileName - El nombre del archivo a descargar (ej: 'exp1-guia.pdf').
 * @param {Event} e - El evento de click.
 */
function trackDownload(fileName, e) {
  // Previene que el enlace vaya a la URL vac칤a '#'
  e.preventDefault(); 
  
  // 1. Registrar el evento en Google Forms (invisiblemente)
  // Usamos la API Fetch para enviar los datos en segundo plano
  fetch(FORM_SUBMIT_URL, {
    method: 'POST',
    mode: 'no-cors', // Necesario para evitar problemas de CORS
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded',
    },
    body: `${FILE_NAME_ENTRY_ID}=${encodeURIComponent(fileName)}&submit=Submit`
  }).then(() => {
    // 칄xito en el registro (o no se pudo verificar)
    console.log(`Registro de descarga exitoso para: ${fileName}`);
  }).catch(error => {
    // Fall칩 el registro
    console.error('Error al registrar la descarga en Forms:', error);
  }).finally(() => {
    // 2. Iniciar la descarga del archivo (Siempre se ejecuta)
    window.location.href = fileName;
  });

  // 3. (Opcional) Simular el incremento visualmente para darle una sensaci칩n de funcionamiento.
  // NOTA: Este n칰mero no ser치 el real hasta que lo actualices manualmente.
  const spanId = 'count-' + fileName.split('.')[0];
  const span = document.getElementById(spanId);
  if(span) {
    const currentCount = parseInt(span.textContent) || 0;
    span.textContent = currentCount + 1;
  }
}


// ---------- 2. GISCUS (Sistema de Comentarios P칰blicos) ----------

const giscusAttributes = {
  "src": "https://giscus.app/client.js",
  "data-repo": "TU_USUARIO/TU_REPOSITORIO", // 游뚿 REEMPLAZAR con el nombre de tu repositorio de GitHub (ej: 'miusuario/tesis-accesible')
  "data-repo-id": "R_kgDOXXXXXXXX", // 游뚿 REEMPLAZAR con el ID de tu repositorio (lo obtienes del sitio de Giscus)
  "data-category": "Announcements", // 游뚿 REEMPLAZAR con la categor칤a que deseas usar para los comentarios (ej: 'General')
  "data-category-id": "DIC_kwDOXXXXXXXX", // 游뚿 REEMPLAZAR con el ID de la categor칤a (lo obtienes del sitio de Giscus)
  "data-mapping": "pathname", // Mapea comentarios por la URL (칰til si usas la misma p치gina para varias cosas)
  "data-strict": "0",
  "data-reactions-enabled": "1",
  "data-emit-metadata": "0",
  "data-input-position": "top",
  "data-theme": "light",
  "data-lang": "es",
  "crossorigin": "anonymous",
  "async": "",
};

const script = document.createElement("script");
Object.entries(giscusAttributes).forEach(([key, value]) => script.setAttribute(key, value));
document.querySelector('#comentarios-giscus .giscus').appendChild(script);

// ---------- 3. VISUALIZACI칍N DE DESCARGAS INICIAL (Manual) ----------

/**
 * Funci칩n que carga los conteos iniciales.
 * Los datos deben actualizarse peri칩dicamente por ti
 * bas치ndote en el conteo de tu Hoja de C치lculo de Google.
 */
function loadInitialCounts() {
  // 游뚿 EJEMPLO: Reemplaza estos valores con los totales de descargas
  // que obtengas de tu Hoja de C치lculo de Google
  const manualCounts = {
    'count-exp1-guia': 15,
    'count-exp1-observacion-docente': 8,
    'count-exp1-reflexion-estudiante': 12,
    'count-exp2-guia': 20,
    'count-exp2-observacion-docente': 9,
    'count-exp2-reflexion-estudiante': 14,
    'count-exp3-guia': 18,
    'count-exp3-observacion-docente': 10,
    'count-exp3-reflexion-estudiante': 11,
  };

  Object.entries(manualCounts).forEach(([id, count]) => {
    const span = document.getElementById(id);
    if(span) span.textContent = count;
  });
}

loadInitialCounts();

</script>

</body>
</html>

     

